/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
group 'org.netvirta'
version '0.0.4-SNAPSHOT'

apply plugin: 'maven'

repositories {
    maven {
        url "http://localhost:8082/repository/maven-public/"
    }
}

task zipFramework(type: Zip) {
   println "Zipping"
   from ("HelloCocoa.framework") {
       include '**'
   }
   
   archiveName 'HelloCocoa.zip'
   destinationDir file("$buildDir/libs/")
   description "Zip up the $archiveName into ${relativePath(destinationDir)} for distribution"
   baseName = "HelloCocoa"
}

artifacts {
    archives zipFramework
}

uploadArchives {
    println "Uploading"
    repositories {
        mavenDeployer {
            repository(url: "${nexusUrl}/repository/maven-releases/") {
                authentication(userName: nexusUsername, password: nexusPassword)
            }
            snapshotRepository(url: "${nexusUrl}/repository/maven-snapshots") {
                authentication(userName: nexusUsername, password: nexusPassword)
            }
        }
    }
}

task uploadZip << {
	zipFramework
	uploadArchives
}
